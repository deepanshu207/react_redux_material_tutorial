{"ast":null,"code":"import _classCallCheck from \"/Users/deepanshu/react/xcite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/deepanshu/react/xcite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/deepanshu/react/xcite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/deepanshu/react/xcite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/deepanshu/react/xcite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/deepanshu/react/xcite/src/Protected.js\";\nimport React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\nimport Layout from './components/layout/Layout';\nimport Dashboard from './components/layout/Dashboard';\nimport FormPage from './components/layout/FormPage';\nimport Login from './auth/Login';\nimport Register from './auth/Register';\nimport { connect } from 'react-redux';\nimport { login as _login, clearCurrentProfile } from './actions/authActions';\nimport { Link, withRouter } from 'react-router-dom';\nimport ErrorPage from './components/layout/ErrorPage';\nimport LoginErrorPage from './components/layout/LoginErrorPage';\n\nvar Auth =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Auth, _React$Component);\n\n  function Auth() {\n    _classCallCheck(this, Auth);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Auth).apply(this, arguments));\n  }\n\n  _createClass(Auth, null, [{\n    key: \"getUser\",\n    value: function getUser() {\n      return localStorage.getItem(\"user\");\n    }\n  }]);\n\n  return Auth;\n}(React.Component);\n\nvar Protected =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Protected, _Component);\n\n  function Protected() {\n    _classCallCheck(this, Protected);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Protected).apply(this, arguments));\n  }\n\n  _createClass(Protected, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {//  if (this.props.location.pathname=='/register')\n      //     {\n      //         this.props.history.push(\"/dashboard\")\n      //     }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          isLoginPending = _this$props.isLoginPending,\n          isLoginSuccess = _this$props.isLoginSuccess,\n          loginError = _this$props.loginError,\n          auth = _this$props.auth;\n      console.log(\"!!!!\");\n      console.log(this.props);\n      console.log(\"!!!!\");\n\n      if (this.props.auth.isLoginSuccess) {\n        localStorage.setItem('user', \"admin\");\n      }\n\n      if (Auth.getUser()) {\n        return React.createElement(Layout, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, this.props.auth.isLoginSuccess == true ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, React.createElement(Redirect, {\n          to: {\n            pathname: '/dashboard'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        })) : null, this.props.location.pathname == '/register' ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, React.createElement(Redirect, {\n          to: {\n            pathname: '/dashboard'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        })) : null, React.createElement(Switch, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, React.createElement(Route, {\n          exact: true,\n          path: \"/dashboard\",\n          component: Dashboard,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }), React.createElement(Route, {\n          exact: true,\n          path: \"/login\",\n          component: LoginErrorPage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }), React.createElement(Route, {\n          exact: true,\n          path: \"/existing\",\n          component: FormPage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }), React.createElement(Route, {\n          exact: true,\n          path: \"*\",\n          component: ErrorPage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        })));\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, React.createElement(Switch, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, React.createElement(Route, {\n          exact: true,\n          path: \"/\",\n          component: Login,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }), React.createElement(Route, {\n          exact: true,\n          path: \"/register\",\n          component: Register,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }), React.createElement(Redirect, {\n          to: {\n            pathname: '/',\n            state: {\n              from: \"*\"\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        })));\n      }\n    }\n  }]);\n\n  return Protected;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var auth = state.auth;\n  return {\n    auth: auth\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    login: function login(email, password) {\n      dispatch(_login(email, password));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Protected)); //   export default Protected;","map":{"version":3,"sources":["/Users/deepanshu/react/xcite/src/Protected.js"],"names":["React","Component","BrowserRouter","Router","Route","Switch","Redirect","Layout","Dashboard","FormPage","Login","Register","connect","login","clearCurrentProfile","Link","withRouter","ErrorPage","LoginErrorPage","Auth","localStorage","getItem","Protected","props","isLoginPending","isLoginSuccess","loginError","auth","console","log","setItem","getUser","pathname","location","state","from","mapStateToProps","mapDispatchToProps","dispatch","email","password"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route , Switch , Redirect } from 'react-router-dom';\nimport Layout from './components/layout/Layout';\nimport Dashboard from './components/layout/Dashboard';\nimport FormPage from './components/layout/FormPage';\nimport Login from './auth/Login';\nimport Register from './auth/Register';\nimport { connect } from 'react-redux';\nimport { login , clearCurrentProfile } from './actions/authActions';\nimport {Link, withRouter } from 'react-router-dom';\nimport ErrorPage from './components/layout/ErrorPage';\nimport LoginErrorPage from './components/layout/LoginErrorPage';\n\nclass Auth extends React.Component {\n    static getUser() {\n        return localStorage.getItem(\"user\");\n    }\n}\n\n\nclass Protected extends Component { \n\ncomponentDidMount()\n{\n\n    //  if (this.props.location.pathname=='/register')\n    //     {\n    //         this.props.history.push(\"/dashboard\")\n    //     }\n\n}\n\n\n    render() {\n    let {isLoginPending, isLoginSuccess, loginError,auth} = this.props;\n    console.log(\"!!!!\");\n    console.log(this.props);\n    console.log(\"!!!!\");\n    if (this.props.auth.isLoginSuccess)\n    {\n    localStorage.setItem('user', \"admin\");\n    }\n\n    if (Auth.getUser())\n    {\n    return (\n    <Layout>\n    {\n    (this.props.auth.isLoginSuccess==true)?(\n     <div>\n     <Redirect to={{pathname: '/dashboard'}}/>\n     </div>\n    ):\n    null\n    } \n    \n    {\n    (this.props.location.pathname=='/register')?(\n     <div>\n     <Redirect to={{pathname: '/dashboard'}}/>\n     </div>\n    ):\n    null\n    } \n\n    <Switch>\n    <Route exact path=\"/dashboard\" component={Dashboard} />\n    <Route exact path=\"/login\" component={LoginErrorPage} />\n    <Route exact path=\"/existing\" component={FormPage} />\n    <Route exact={true} path='*' component={ErrorPage} />\n    </Switch>\n    </Layout>\n      );\n    }\n    else{\n    return (\n    <div>\n    <Switch>\n    <Route exact path=\"/\" component={Login} />\n    <Route exact path=\"/register\" component={Register} />\n    <Redirect to={{ pathname: '/', state: { from: \"*\" } }} /> \n    {/* <Redirect from=\"*\" to=\"/\" /> */}  \n    </Switch>\n    </div>   \n    );\n       \n    }\n    } \n  }\n  \n  const mapStateToProps = (state) => {\n    const { auth } = state;\n    return {\n      auth:auth\n    };\n  }\n  \n  const mapDispatchToProps = (dispatch) => {\n    return {\n      login: (email, password) =>  { dispatch(login(email, password))\n      },\n    };\n  }\n  \n  export default connect(mapStateToProps, mapDispatchToProps)(withRouter(Protected));\n\n  \n\n//   export default Protected;"]},"metadata":{},"sourceType":"module"}