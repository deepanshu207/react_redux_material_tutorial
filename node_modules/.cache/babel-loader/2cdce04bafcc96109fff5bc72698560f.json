{"ast":null,"code":"import _classCallCheck from \"/Users/deepanshu/react/xcite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/deepanshu/react/xcite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/deepanshu/react/xcite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/deepanshu/react/xcite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/deepanshu/react/xcite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/deepanshu/react/xcite/src/Protected.js\";\nimport React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\nimport Layout from './components/layout/Layout';\nimport Dashboard from './components/layout/Dashboard';\nimport FormPage from './components/layout/FormPage';\nimport Login from './auth/Login';\nimport { connect } from 'react-redux';\nimport { login as _login, clearCurrentProfile } from './actions/authActions';\nimport { Link, withRouter } from 'react-router-dom';\nimport ErrorPage from './components/layout/ErrorPage';\n\nvar Auth =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Auth, _React$Component);\n\n  function Auth() {\n    _classCallCheck(this, Auth);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Auth).apply(this, arguments));\n  }\n\n  _createClass(Auth, null, [{\n    key: \"getUser\",\n    value: function getUser() {\n      return localStorage.getItem(\"user\");\n    }\n  }]);\n\n  return Auth;\n}(React.Component);\n\nvar Protected =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Protected, _Component);\n\n  function Protected() {\n    _classCallCheck(this, Protected);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Protected).apply(this, arguments));\n  }\n\n  _createClass(Protected, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.location.pathname == '/login') {\n        this.props.history.push(\"/\");\n      }\n\n      if (this.props.auth.isLoginSuccess == false) {\n        this.props.history.push(\"/login\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          isLoginPending = _this$props.isLoginPending,\n          isLoginSuccess = _this$props.isLoginSuccess,\n          loginError = _this$props.loginError,\n          auth = _this$props.auth;\n      console.log(\"!!!!\");\n      console.log(this.props);\n      console.log(\"!!!!\");\n\n      if (this.props.auth.isLoginSuccess) {\n        localStorage.setItem('user', \"admin\");\n      }\n\n      if (Auth.getUser()) {\n        return React.createElement(Layout, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }, this.props.auth.isLoginSuccess == true ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, React.createElement(Redirect, {\n          to: {\n            pathname: '/'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        })) : null, React.createElement(Switch, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, React.createElement(Route, {\n          exact: true,\n          path: \"/\",\n          component: Dashboard,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }), React.createElement(Route, {\n          exact: true,\n          path: \"/existing\",\n          component: FormPage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }), React.createElement(Route, {\n          exact: true,\n          path: \"*\",\n          component: ErrorPage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        })));\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return Protected;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var auth = state.auth;\n  return {\n    auth: auth\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    login: function login(email, password) {\n      dispatch(_login(email, password));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Protected)); //   export default Protected;","map":{"version":3,"sources":["/Users/deepanshu/react/xcite/src/Protected.js"],"names":["React","Component","BrowserRouter","Router","Route","Switch","Redirect","Layout","Dashboard","FormPage","Login","connect","login","clearCurrentProfile","Link","withRouter","ErrorPage","Auth","localStorage","getItem","Protected","props","location","pathname","history","push","auth","isLoginSuccess","isLoginPending","loginError","console","log","setItem","getUser","mapStateToProps","state","mapDispatchToProps","dispatch","email","password"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route , Switch , Redirect } from 'react-router-dom';\nimport Layout from './components/layout/Layout';\nimport Dashboard from './components/layout/Dashboard';\nimport FormPage from './components/layout/FormPage';\nimport Login from './auth/Login';\nimport { connect } from 'react-redux';\nimport { login , clearCurrentProfile } from './actions/authActions';\nimport {Link, withRouter } from 'react-router-dom';\nimport ErrorPage from './components/layout/ErrorPage';\n\nclass Auth extends React.Component {\n    static getUser() {\n        return localStorage.getItem(\"user\");\n    }\n}\n\n\nclass Protected extends Component { \n\ncomponentDidMount()\n{\n    if (this.props.location.pathname=='/login')\n    {\n        this.props.history.push(\"/\")\n    }\n\n    if (this.props.auth.isLoginSuccess==false)\n    {\n        this.props.history.push(\"/login\")\n    }\n\n\n\n}\n\n    render() {\n    let {isLoginPending, isLoginSuccess, loginError,auth} = this.props;\n    console.log(\"!!!!\");\n    console.log(this.props);\n    console.log(\"!!!!\");\n    if (this.props.auth.isLoginSuccess)\n    {\n    localStorage.setItem('user', \"admin\");\n    }\n\n\n    if (Auth.getUser())\n    {\n    return (\n    <Layout>\n    {\n    (this.props.auth.isLoginSuccess==true)?(\n     <div>\n     <Redirect to={{pathname: '/'}}/>\n     </div>\n    ):\n    null\n    } \n    <Switch>\n    <Route exact path=\"/\" component={Dashboard} />\n    <Route exact path=\"/existing\" component={FormPage} />\n    <Route exact={true} path='*' component={ErrorPage} />\n    </Switch>\n    </Layout>\n      );\n    }\n    else{\n    return (\n    <div>\n    {/* <Redirect to=\"/login\" /> */}\n    </div>\n    );\n       \n    }\n    } \n  }\n  \n  const mapStateToProps = (state) => {\n    const { auth } = state;\n    return {\n      auth:auth\n    };\n  }\n  \n  const mapDispatchToProps = (dispatch) => {\n    return {\n      login: (email, password) =>  { dispatch(login(email, password))\n      },\n    };\n  }\n  \n  export default connect(mapStateToProps, mapDispatchToProps)(withRouter(Protected));\n\n  \n\n//   export default Protected;"]},"metadata":{},"sourceType":"module"}